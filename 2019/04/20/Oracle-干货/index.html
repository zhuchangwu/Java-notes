<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="author" content="赐我白日梦">
    
    <meta name="description" content="随笔">
    
    
    
    
    
    
    <title>Oracle--干货 | 随笔</title>
    <!-- inject:style -->
    <link href="/css/style.css" rel="stylesheet" type="text/css">
    <!-- endinject -->
    <style>
        .cube-loading {
            top: 0;
            position: fixed;
            width: 100%;
            height: 100%;
            background: url('/images/lg/loading.gif') no-repeat center center;
            background-color: rgba(0,0,0,.7);
        }

        .cube-loading.out {
            display: none;
        }

        .cube-loading:before {
            display: block;
            content: 'Loading';
            position: relative;
            width: 100%;
            top: 50%;
            right: -50%;
            color: #fff;
        }

        @media(max-width: 768px) {
            .cube-loading:before {
                font-size: 1.2em;
                transform: translate(-24px,20px);
                -webkit-transform: translate(-24px,20px);
                -o-transform: translate(-24px,20px);
                -ms-transform: translate(-24px,20px);
            }
        }

        @media(min-width: 768px) {
            .cube-loading:before {

            }
        }
    </style>
    
</head></html>
<body>
<div class="cube-body">
    <nav id="cube-top-memu" class="cube-menu">
    <ul class="cube-menu-collapse">
        
        <li>
            <i class="cube-icon cube-icon-home" aria-hidden="true"></i>
            <a href="/">首页</a>
        </li>
        
        <li>
            <i class="cube-icon cube-icon-archive" aria-hidden="true"></i>
            <a href="/archives">归档</a>
        </li>
        
        <li>
            <i class="cube-icon cube-icon-categories" aria-hidden="true"></i>
            <a href="/categories">分类</a>
        </li>
        
        <li>
            <i class="cube-icon cube-icon-tags" aria-hidden="true"></i>
            <a href="/tags">标签</a>
        </li>
        
        <li>
            <i class="cube-icon cube-icon-about" aria-hidden="true"></i>
            <a href="/about-me">关于我</a>
        </li>
        
    </ul>
</nav>
<nav class="cube-side-menu" id="cube-side-menu">
    <ul class="cube-menu-list">
        
        <li>
            <a class="lrc-control">Open Lyrics</a>
        </li>
        
        <li>
            <a class="scroll-to-top">Top</a>
        </li>
    </ul>
</nav>
    <header class="cube-header" id="cube-header">
    <img src=" /bg.jpg " alt="头部背景图片">
    
    <div class="cube-type">
        <span class="cube-typed-title">Blogs of daydream</span>
        <span class="cube-typed-cursor">|</span>
    </div>
    
</header>

    <style>
        nav.cube-menu:before {
            content: '';
            visibility: hidden;
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 44px;
        
            filter: blur(5px);
            -webkit-filter: blur(5px);
        
            z-index: -1;
            background-image: url('/images//bg.jpg');
            background-repeat: no-repeat;
            background-position: center -356px;
            background-size: cover;
            background-color: transparent;
        }

        header.cube-background.cube-header-background {
            visibility: hidden;
            background-image: url('/images//bg.jpg');
            background-position: center -400px;
        }
    </style>
    <header class="cube-background cube-header-background">
        
        <div class="cube-type">
            <span class="cube-typed-title">Blogs of daydream</span>
            <span class="cube-typed-cursor">|</span>
        </div>
        
    </header>
    <div class="load-header-background"></div>
    <script>
        (function (window) {

            window.headerModule = {}
            window.headerModule.image = {
                width: '2000',
                height: '1414'
            }

        })(window)
    </script>
    
    <div class="cube-content">
        <div class="cube-left">
            <div class="cube-article">
    <h1 class="title">Oracle--干货</h1>
    
    <div class="cube-article-header">
        <div class="cube-article-date">
            <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
            <!-- moment.js对象 -->
            2019-04-20
        </div>
        <div class="cube-article-tags">
    <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
    
    <a href="/tags/Oracle/">#Oracle</a>
    
</div>
    </div>
    
    <div class="cube-article-content cube-markdown">
        
        <h2 id="Oracle数据库的体系结构"><a href="#Oracle数据库的体系结构" class="headerlink" title="Oracle数据库的体系结构"></a>Oracle数据库的体系结构</h2><ol>
<li><strong>数据库: database</strong></li>
</ol>
<blockquote>
<p>Oracle数据库是数据的物理存储,和mysql不一样的是,只要我们愿意,我们就可以在mysql下创建任意的数据库,每个新项目的启动,创建一个数据库,然后通过<code>showdatabases</code>可以查看到全部数据库,但是Oracle的数据库是一个操作系统只有一个库,说白了,就是把Oracle看成一个大的数据库<br><a id="more"></a></p>
<ol start="2">
<li><strong>实例:</strong></li>
</ol>
</blockquote>
<blockquote>
<p>一个Oracle实例,有一系列的后台进程(Background Processes) 和内存结构(Momory Structures),一个数据库,可以有多个实例</p>
</blockquote>
<ol start="3">
<li><strong>数据文件: dbf</strong></li>
</ol>
<blockquote>
<p>Oracle中的数据是存放在表空间里面的 <strong>数据文件</strong>中的,一个数据文件,只属于一个表空间,一旦数据文件被加入到表空间,那么,这个数据文件就不能被删除了,除非我们删除表空间</p>
</blockquote>
<ol start="4">
<li><strong>表空间</strong></li>
</ol>
<blockquote>
<p><strong>表空间其实是一种逻辑上的映射</strong>, 我们知道,Oracle的数据存放在 数据文件(dbf/ora)中,数据文件在Oracle中是物理层面上的结构,而表空间,就是基于物理层面的数据文件的逻辑上抽象出来的映射, 一个Oracle数据库,至少有一个表空间(system表空间),每个表空间,由同一个磁盘上的一个或多个数据文件组成</p>
</blockquote>
<blockquote>
<p>每个新项目的启动我们都会创建新的表空间</p>
</blockquote>
<ol start="5">
<li><strong>用户:</strong></li>
</ol>
<blockquote>
<p>用户是在实例下创建的,1. 不同实例中可以创建相同名字的用户, 2. 表的数据是由用户放入到表空间里面的,表空间在把数据随机的放入到一个或者多个不同的数据文件中</p>
</blockquote>
<blockquote>
<p>oracle中的数据由 用户+表空间 进行管理和存放!  表是给用户去查的,而不是给表空间查,因为不同的用户可以在同一个表空间创建同名的表,所以Oralce区分用户</p>
</blockquote>
<p>6: <strong>SCOTT 用户 和 HR用户</strong></p>
<p>这两个用户是Oracle默认的初始用户,让初学者更好的进行学习</p>
<img src="/2019/04/20/Oracle-干货/1.jpg" title="关系图">
<hr>
<p>举个例子,顺一下整个Orcle的使用流程</p>
<h3 id="1-公司新项目启动"><a href="#1-公司新项目启动" class="headerlink" title="1. 公司新项目启动"></a>1. 公司新项目启动</h3><h3 id="2-运维工程师-DBA-在Oracle数据库给新项目开辟一个新的表空间"><a href="#2-运维工程师-DBA-在Oracle数据库给新项目开辟一个新的表空间" class="headerlink" title="2. 运维工程师(DBA)在Oracle数据库给新项目开辟一个新的表空间"></a>2. 运维工程师(DBA)在Oracle数据库给新项目开辟一个新的表空间</h3><ul>
<li>运维工程师登录数据库的身份是 DBA(系统管理员), DBA是超人,裤衩穿在外面,拥有对Oracle的最高权限</li>
</ul>
<p>创建表空间的sql<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">tablespace</span> 表空间名</span><br><span class="line"><span class="keyword">logging</span>  </span><br><span class="line"><span class="keyword">datafile</span> <span class="string">'D:\oracle\oradata\Oracle9i\user_data.dbf'</span> <span class="comment">-- dbf文件的路径</span></span><br><span class="line"><span class="keyword">size</span> <span class="number">50</span>m        <span class="comment">-- 单个dbf文件初始化大小</span></span><br><span class="line"><span class="keyword">autoextend</span> <span class="keyword">on</span>   <span class="comment">-- 自动增长</span></span><br><span class="line"><span class="keyword">next</span> <span class="number">50</span>m        <span class="comment">-- 下次增长的大小</span></span><br><span class="line"><span class="keyword">maxsize</span> <span class="number">20480</span>m  <span class="comment">-- 最大内存</span></span><br></pre></td></tr></table></figure></p>
<blockquote>
<p><strong>后续插入到数据库里面的数据存放在磁盘上的 XXX.DBF文件中,而表空间就是对这些dbf文件的抽象</strong></p>
</blockquote>
<blockquote>
<p><strong>安装完数据库,会自动创建1. System系统表空间 2.TEMP 临时表空间 3. UNDP 重做日志表空间 4.USERS 用户表空间(创建普通用户时默认的表空间)</strong></p>
</blockquote>
<p>DBA查看表空间是否创建成功</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> file_name,tablespace_name <span class="keyword">from</span> dba_data_files <span class="keyword">order</span> <span class="keyword">by</span>  file_name;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>dba_data_files 这种dba_XXX 开头的,只有DBA才有权限查看,普通用户执行的话,会报错说,表或视图不存在</strong></p>
</blockquote>
<p>DBA查看每个用户的默认表空间</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> user_id , username, default_tablespace <span class="keyword">from</span> dba_users;</span><br></pre></td></tr></table></figure>
<p>DBA修改默认的用户表空间(我们知道,新创建用户属于users,而下面的命令就可以把users替换成其他存在的表空间)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Alter</span> <span class="keyword">database</span> <span class="keyword">default</span> <span class="keyword">tablespace</span> 其他表空间;</span><br></pre></td></tr></table></figure>
<p>DBA修改表空间的名称</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Alter</span> <span class="keyword">tablespace</span> 表空间的当前名称 <span class="keyword">rename</span> <span class="keyword">to</span>  表空间的新名称</span><br></pre></td></tr></table></figure>
<p>DBA 删除表空间</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">tablespace</span> user1 ;  <span class="comment">-- 不会删除本地的 dbf文件</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">tablespace</span> user1 <span class="keyword">including</span> <span class="keyword">contents</span> <span class="keyword">and</span> <span class="keyword">datafiles</span>;    <span class="comment">-- 删除本地的dbf 数据文件</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>一般不让普通用户创建表空间,若他非要创建,需要问DBA要 授权</p>
</blockquote>
<h3 id="3-DBA给开发工程师创建账号"><a href="#3-DBA给开发工程师创建账号" class="headerlink" title="3.DBA给开发工程师创建账号"></a>3.DBA给开发工程师创建账号</h3><p>创建用户的sql</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> 用户名</span><br><span class="line"><span class="keyword">identified</span> <span class="keyword">by</span> 密码</span><br><span class="line"><span class="keyword">default</span> <span class="keyword">tablespace</span>  表空间;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意: 新创建的用户没有任何权限,他甚至都不能登录Oracle数据库,(新创建的用户登录Oracle会报错说<code>缺少创建session的权利</code>)</p>
</blockquote>
<h3 id="4-DBA给新创建的用户授权"><a href="#4-DBA给新创建的用户授权" class="headerlink" title="4. DBA给新创建的用户授权"></a>4. DBA给新创建的用户授权</h3><p><strong>DBA给普通用户授权sql</strong><br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> 角色/权限 <span class="keyword">to</span> 用户名;</span><br></pre></td></tr></table></figure></p>
<p><strong>DBA自定义角色sql</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">role</span> 自定义角色名</span><br><span class="line"><span class="string">``</span><span class="string">`创建会话</span></span><br><span class="line"><span class="string">&gt; 然后使用 grant给我们的角色授权,grant给用户</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**DBA删除角色sql**</span></span><br><span class="line"><span class="string">&gt; **试了一下,DBA删除系统自带的角色,果然还是裤衩穿在外面,二话不说,删除成功了**</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span><span class="keyword">sql</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">user</span> 用户名 <span class="keyword">cascade</span>;  <span class="comment">-- 删除用户级联的关系也会被删除掉</span></span><br></pre></td></tr></table></figure>
<p><strong>权限的传递(包括普通用户,只要求当前的东西是属于他的就行)</strong></p>
<p>关键字: <code>with grant option;</code></p>
<p>例: scott 把属于他的emp表的 增删改查权限给 另一个用户B ,同时允许B把权限传递给别人<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> all <span class="keyword">on</span> emp <span class="keyword">to</span> B <span class="keyword">with</span> <span class="keyword">grant</span> <span class="keyword">option</span>;</span><br></pre></td></tr></table></figure></p>
<p>注意点:</p>
<ul>
<li>with grant option 可选, 如果不写的话,B用户不能把权限传递给别人  </li>
<li>B用户得到的权限 针对的是表中的数据,而不是这张表, 表的主人仍然是scott </li>
<li>B试着删除emp表,结果尝试删除不属于自己的表直接掉线了</li>
<li>B对emp的操作都要添加前缀 scott.emp</li>
</ul>
<p><strong>收回部分权限/全部权限</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Revoke</span> <span class="keyword">select</span>[<span class="keyword">insert</span>,<span class="keyword">delete</span>,<span class="keyword">update</span>] <span class="keyword">on</span> 表名 <span class="keyword">from</span> 用户名</span><br><span class="line"></span><br><span class="line"><span class="keyword">Revoke</span>   all  <span class="keyword">on</span> 表名 <span class="keyword">from</span> 用户名</span><br></pre></td></tr></table></figure>
<p><strong>当前用户(包括普通用户查看自己的权限)</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> user_sys_privs;</span><br></pre></td></tr></table></figure>
<ul>
<li>问一句, 什么是权限?什么是角色?</li>
</ul>
<p>刚才说了,在Oracle中,新创建的用户默认一点权限都没有,没有权限就不能对数据库进行操作, 有了用户但是不能对oracle进行操作那要这个用户 干什么? 所以就得根据需求授予用户权利</p>
<p>比如说,如果 <code>create session</code> 权限,可以让用户登录Oracle, <code>create table</code>权限可以让用户在自己所属的表空间创建表</p>
<p>多个权限的集合 === 角色</p>
<p>在Oracle主要有<strong>三种角色</strong>, 分别是  </p>
<p><strong>1. DBA系统管理员</strong> </p>
<blockquote>
<p>这个角色拥有至高无上的权限,传说中删库跑路的主,拥有的角色就是DBA</p>
</blockquote>
<p><strong>2. Resource 专属开发者的权限</strong></p>
<p>开发者可以做下面的事,开发我们的新项目</p>
<ul>
<li>create cluster 建立聚簇</li>
<li>create procedure 建立过程<ul>
<li>存储过程是一组已经编译好了的plsql语句,辅助提高对数据库的读写效率</li>
</ul>
</li>
<li>create sequence 建立序列<ul>
<li>oracle和mysql不一样,是没有auto_increament自增长的,而序列可以间接实现自增长</li>
</ul>
</li>
<li>create table 建表</li>
<li>create trigger 创建触发器<ul>
<li>我们可以把它理解成是监听器,监听用户对具体某张数据表的具体操作(inset update delete)然后再操作前后做出相应的 逻辑反应</li>
</ul>
</li>
<li>create type 创建类型<ul>
<li>变量名 类型 </li>
</ul>
</li>
</ul>
<p><strong>3. Connect 最终用户的权限</strong></p>
<ul>
<li>alter session  修改</li>
<li>create cluster 建立聚簇</li>
<li>create Database Link 创建数据库连接</li>
<li>create session – 创建会话(登录的前提)</li>
<li>create synonym 创建同义词</li>
<li>create view 创建视图</li>
</ul>
<h3 id="5-开发人员把密码忘了DBA怎么办"><a href="#5-开发人员把密码忘了DBA怎么办" class="headerlink" title="5. 开发人员把密码忘了DBA怎么办?"></a>5. 开发人员把密码忘了DBA怎么办?</h3><p><strong>修改某用户的 用户密码</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">user</span> 用户名 <span class="keyword">identified</span> <span class="keyword">by</span> 新密码;</span><br></pre></td></tr></table></figure>
<h3 id="6-开发人员离职DBA怎么办"><a href="#6-开发人员离职DBA怎么办" class="headerlink" title="6. 开发人员离职DBA怎么办?"></a>6. 开发人员离职DBA怎么办?</h3><p><strong>删除用户</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> 用户名 <span class="keyword">CASCADE</span>;</span><br></pre></td></tr></table></figure>
<h2 id="补充概念"><a href="#补充概念" class="headerlink" title="补充概念"></a>补充概念</h2><h3 id="什么是事务"><a href="#什么是事务" class="headerlink" title="什么是事务"></a>什么是事务</h3><blockquote>
<p><strong>事务可以理解成是一组操作的集合,要么都成功,要么都失败</strong></p>
</blockquote>
<h3 id="事务的四大特性"><a href="#事务的四大特性" class="headerlink" title="事务的四大特性"></a>事务的四大特性</h3><ul>
<li>Atomicity 原子性</li>
<li>Consistency 一致性</li>
<li>Isolation 隔离性</li>
<li>Durability 持久性</li>
</ul>
<h3 id="事务的提交-回滚点-回滚"><a href="#事务的提交-回滚点-回滚" class="headerlink" title="事务的提交 , 回滚点, 回滚"></a>事务的提交 , 回滚点, 回滚</h3><ul>
<li>commit</li>
<li>savepoint</li>
<li>rollback</li>
</ul>
<h3 id="什么是视图"><a href="#什么是视图" class="headerlink" title="什么是视图?"></a>什么是视图?</h3><p>视图可以理解成一扇窗户,是对我们查询出来的数据的封装,说的这么高大尚,但是本质就是从好几张不同的表中抽取字段,组成一张新的表(从而屏蔽掉我们不想看到的字段)</p>
<p>特点: 视图中的所有数据都来自于原表中的数据,<strong>换句话说,如果视图中的数据被更改,原表中的数据也会被修改</strong> 但是<strong>如果我们在创建视图时添加  <code>with read only</code> 就是只读的视图</strong></p>
<blockquote>
<p>创建视图  用的关键字是 as  (同义词是for 别混了)</p>
</blockquote>
<p>语法:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">view</span> 视图名 <span class="keyword">as</span> 查询语句 [whth <span class="keyword">read</span> <span class="keyword">only</span>]</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>再说一下,视图本质还是一张表,只要不设置它是只读的,那么,DML语句同样适用于视图</strong></p>
</blockquote>
<h3 id="什么是别名"><a href="#什么是别名" class="headerlink" title="什么是别名?"></a>什么是别名?</h3><p>关键字是  synonym(别名)</p>
<p>sql<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> 别名 <span class="keyword">for</span> 视图/表</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p><strong>很多情况下我们是给视图取别名,因为一般视图的名称都是XXX_view,遵循命名规范,一看他就是视图,为了让他看起来像个表,于是我们给视图取个表的名子</strong></p>
</blockquote>
<h3 id="什么是序列"><a href="#什么是序列" class="headerlink" title="什么是序列?"></a>什么是序列?</h3><blockquote>
<p>在mysql中,我们想让某个字段自增长的话, 可以使用 auto_increatement 关键字</p>
</blockquote>
<p> <strong>然而oracle没有auto_increatement!!!    但是 oracle 中 使用序列完成对相似操作</strong></p>
<p>语法:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">sequence</span> 序列名</span><br><span class="line"><span class="keyword">start</span> <span class="keyword">with</span> 从几开始</span><br><span class="line"><span class="keyword">increment</span> <span class="keyword">by</span> 每次增长几</span><br><span class="line">maxvalue 最大值| <span class="keyword">nomaxvalue</span></span><br><span class="line"><span class="keyword">minvalue</span> 最小值 | <span class="keyword">nominvalue</span></span><br><span class="line"><span class="keyword">cycle</span> | <span class="keyword">nocycle</span></span><br><span class="line"><span class="keyword">cache</span> 缓存的数量 | nocache</span><br></pre></td></tr></table></figure>
<p>注意点:</p>
<ul>
<li>下面的语句执行报错了,原因是 cache值必须小于cycle , 也就是指定了 cycle, 就必须再写出cache的值,不然报错<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">sequence</span> startText1</span><br><span class="line">   <span class="keyword">start</span> <span class="keyword">with</span> <span class="number">1</span></span><br><span class="line">   <span class="keyword">increment</span> <span class="keyword">by</span> <span class="number">2</span></span><br><span class="line">   maxvalue <span class="number">30</span></span><br><span class="line">   <span class="keyword">cycle</span></span><br><span class="line">;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>正确创建:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">sequence</span> startText1</span><br><span class="line">    <span class="keyword">start</span> <span class="keyword">with</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">increment</span> <span class="keyword">by</span> <span class="number">2</span></span><br><span class="line">    maxvalue <span class="number">30</span></span><br><span class="line">    <span class="keyword">cycle</span></span><br><span class="line">    <span class="keyword">cache</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure>
<p>从序列中获取值</p>
<p>关键字:  currval : 当前值<br>关键字:  nextval : 下一个值</p>
<ul>
<li>注意: —–  currval 在 nextval之后才能用</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> startText1.nextval  <span class="keyword">from</span> dual;  <span class="comment">-- 先执行  </span></span><br><span class="line"><span class="keyword">select</span> startText1.currval  <span class="keyword">from</span> dual;  <span class="comment">-- 再执行,不然报错/或者一直都是当前值</span></span><br></pre></td></tr></table></figure>
<p><strong>create sequence seq_text2; – 默认没有最大值,不循环,不缓存</strong></p>
<h3 id="什么是索引"><a href="#什么是索引" class="headerlink" title="什么是索引?"></a>什么是索引?</h3><ul>
<li>相当于一本书的目录,可以提高我们的查询效率<br> – 语法<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> 索引名称 <span class="keyword">on</span> 表名(列)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>注意:<br>主键约束自带主键索引<br>唯一约束自带唯一索引  </p>
<h3 id="sql-优化"><a href="#sql-优化" class="headerlink" title="sql 优化"></a>sql 优化</h3><p>– 考虑 Cost CPU调用次数<br>– 考虑 Cardinality 影响行数  </p>
<p>在百万级别的数据里面检索, 建立索引 create index 无论是在Cost  CPU的调用次数,还是Cardinality 影响行数 都会产生上百数量级级别的差距</p>
<p>– 索引 原理;<br>– btree balance Tree 平衡二叉树<br>– 每个子节点都会记录 物理地址  — rowid<br>– 优点: 把某列当作查询条件的时候, 可以提高查询效率,<br>– 缺点: 在修改的时候,会变慢(DBA 每隔一段时间就会重构索引)  </p>

    </div>
</div>

<div class="cube-article-nav">
    <ul>
        
        <li class="prev">
            <a href="/2019/04/21/DQL/">
                <i class="cube-icon cube-prev" aria-hidden="true"></i>
                DQL
            </a>
        </li>
        
        
        <li class="next">
            <a href="/2019/04/15/SpringMvc-开发手册/">
                SpringMvc -- 开发手册
                <i class="cube-icon cube-next" aria-hidden="true"></i>
            </a>
        </li>
        
    </ul>
</div>


<!-- TODO 根据theme.comment的内容进行入口选择 -->



        </div>
        <div class="cube-right">
            

<div class="cube-search cube-sidebar" id="cube-search">
    <div class="search-container">
        <input type="text" placeholder="Search" class="cube-search-input" id="cube-search-input">
        <i class="cube-icon cube-icon-search cube-search-submit" aria-hidden="true"></i>
    </div>
    <!-- TODO 通过给window赋一个全局变量，通过脚本赋值 -->
</div>
<script>
    (function (window) {
        'use strict';
        window.searchModule = {}
        window.searchModule.JSONUrl = '/content.json'
        window.searchModule.rootUrl = '/'
    })(window)
</script>
<div class="cube-search-form">
    <div class="cube-search-control">
        <input type="text" placeholder="Search" class="search-input">
        <a class="close-button">
            <i class="cube-icon cube-close" aria-hidden="true"></i>
        </a>
    </div>
    <div class="cube-search-result"></div>
</div>


<div class="cube-author cube-sidebar" id="cube-author">
    
    
    <span>赐我白日梦</span>
    
    
    <a title="随笔">随笔</a>
    
    <div class="count">
        <a class="count articles"><span>45</span>Article</a>
        <a class="count tags"><span>21</span>Tags</a>
        <a class="count categories"><span>20</span>Categories</a>
    </div>
</div>



<div class="cube-music cube-sidebar" id="cube-music">
    <div class="cube-player aplayer" id="cube-player"></div>
</div>
<script>
    (function (window) {
        window.musicModule = {}
        window.musicModule.musicConfig = '{"narrow":false,"autoplay":false,"showlrc":3,"theme":"#b7daff","mutex":true,"mode":"circulation","preload":"auto","listmaxheight":"513px","music":[{"title":"Dear friends","author":"TRIPLANE","url":"http://cube-1252774894.cosgz.myqcloud.com/music/source/TRIPLANE - Dear friends.mp3","lrc":"http://cube-1252774894.cosgz.myqcloud.com/music/lrc/Dear friends - TRIPLANE.lrc","pic":"http://cube-1252774894.cosgz.myqcloud.com/music/image/TRIPLANE - Dear friends.jpg"},{"title":"Butter-Fly","author":"和田光司","url":"http://cube-1252774894.cosgz.myqcloud.com/music/source/和田光司 - Butter-Fly (ピアノヴァージョン).mp3","lrc":"http://cube-1252774894.cosgz.myqcloud.com/music/lrc/Butter-Fly (ピアノヴァージョン) - 和田光司.lrc","pic":"http://cube-1252774894.cosgz.myqcloud.com/music/image/和田光司 - Butter-Fly (ピアノヴァージョン).jpg"},{"title":"宵闇花火","author":"葉月ゆら","url":"http://cube-1252774894.cosgz.myqcloud.com/music/source/葉月ゆら - 宵闇花火.mp3","lrc":"http://cube-1252774894.cosgz.myqcloud.com/music/lrc/宵闇花火 - 葉月ゆら.lrc","pic":"http://cube-1252774894.cosgz.myqcloud.com/music/image/葉月ゆら - 宵闇花火.jpg"}]}'
        window.musicModule.lrcConfig = {
            open: 'Open Lyrics',
            close: 'Close Lyrics'
        }
    })(window)
</script>



<div class="cube-recent-posts cube-sidebar" id="cube-recent-posts">
    <div class="title">
        <a>Recent Posts</a>
    </div>
    <ul class="list">
        
        
        <li>
            <!-- TODO 如果文章要显示图片，那么在front-matter上添加preview属性(url or path) -->
            
            <div class="normal">
                <p class="index first">
                    <span>1</span>
                </p>
                <p class="title">
                    <a href="/2019/06/07/TCP-IP-协议与-HTTP协议/" title="TCP/IP 协议与 HTTP协议">TCP/IP 协议与 HTTP协议</a>
                </p>
            </div>
            
        </li>
        
        
        
        <li>
            <div class="normal">
                <p class="index">
                    <span>2</span>
                </p>
                <p class="title">
                    <a href="/2019/05/25/腾讯短信-Springboot-Redis-实现短信验证注册/" title="腾讯短信+Springboot+Redis 实现短信验证注册">腾讯短信+Springboot+Redis 实现短信验证注册</a>
                </p>
            </div>
        </li>
        
        
        
        <li>
            <div class="normal">
                <p class="index">
                    <span>3</span>
                </p>
                <p class="title">
                    <a href="/2019/05/15/ubuntu16搭建文件服务器/" title="ubuntu16搭建文件服务器">ubuntu16搭建文件服务器</a>
                </p>
            </div>
        </li>
        
        
        
        <li>
            <div class="normal">
                <p class="index">
                    <span>4</span>
                </p>
                <p class="title">
                    <a href="/2019/04/23/JS-实现动态轮播图/" title="JS 实现动态轮播图">JS 实现动态轮播图</a>
                </p>
            </div>
        </li>
        
        
        
        <li>
            <div class="normal">
                <p class="index">
                    <span>5</span>
                </p>
                <p class="title">
                    <a href="/2019/04/22/PLSQL/" title="PLSQL">PLSQL</a>
                </p>
            </div>
        </li>
        
        
    </ul>
</div>



<div class="cube-categories cube-sidebar" id="cube-categories">
    <div class="title">
        <a href="/categories">Categories</a>
    </div>
    <div class="cube-boxs">
        
        
        <div class="cube-box-bg ">
            <a href="/categories/Oracle/">#Oracle</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/Elasticsearch/">#Elasticsearch</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/categories/Hibernate-Validator/">#Hibernate-Validator</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/Redis/">#Redis</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/Linux/">#Linux</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/mysql/">#mysql</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/categories/SpringMvc/">#SpringMvc</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/Thymeleaf/">#Thymeleaf</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/categories/nginx/">#nginx</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/C/">#C++</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/java/">#java</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/JWT/">#JWT</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/多线程/">#多线程</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/Java/">#Java</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/JavaScript/">#JavaScript</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/JVM/">#JVM</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/RabbitMQ/">#RabbitMQ</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/爬虫/">#爬虫</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/mybatis/">#mybatis</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/Spring/">#Spring</a>
        </div>
        
    </div>
</div>



<div class="cube-tagcloud cube-sidebar" id="cube-tagcloud">
    <div class="title">
        <a href="/tags">Tagcloud</a>
    </div>
    <div class="cube-boxs">
        
        
        <div class="cube-box ">
            <a href="/tags/Oracle/">#Oracle</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/Elasticsearch/">#Elasticsearch</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/Hibernate-Validator/">#Hibernate-Validator</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/Redis/">#Redis</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/Linux/">#Linux</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/mysql/">#mysql</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/SpringMvc/">#SpringMvc</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/Thymeleaf/">#Thymeleaf</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/nginx/">#nginx</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/nginx-FDFS/">#nginx,FDFS</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/C/">#C++</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/java/">#java</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/JWT/">#JWT</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/多线程/">#多线程</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/Java/">#Java</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/JavaScript/">#JavaScript</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/JVM/">#JVM</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/RabbitMQ/">#RabbitMQ</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/爬虫/">#爬虫</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/mybatis/">#mybatis</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/Spring/">#Spring</a>
        </div>
        
    </div>
</div>


        </div>
    </div>
</div>
<footer class="cube-footer">
    
© 2017 赐我白日梦

<br>
Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>.&nbsp;Theme by <a href="https://github.com/ZEROKISEKI" target="_blank">AONOSORA</a>
</footer>
<!-- inject:script -->
<script src="/js/script.js"></script>
<!-- endinject -->
<div class="cube-loading out"></div>
</body>
</html>